<div class="card-body" [formGroup]="pointsForm">
  <UIButton color="primary" [block]="true" (click)="addPoints()">
    <i class="bi bi-plus"></i>
    Agregar Punto
  </UIButton>

  <div class="points-container" formArrayName="points">
    <div class="m-1" *ngFor="let point of points.controls; let i = index" [formGroupName]="i">
      <UIButton customStyle="background-color: #3b4044; " [block]="true" (click)="toggleExpandPoint(i)">
        Punto {{ i + 1 }}
        <i [ngClass]="{'bi bi-caret-right-fill': !point.get('expanded')?.value, 'bi bi-caret-down-fill': point.get('expanded')?.value}"></i>
      </UIButton>

      <div class="m-2" *ngIf="point.get('expanded')?.value">
        <div class="d-flex justify-content-end">
          <UIButton color="danger" [block]="false" [round]="true" (click)="deletePoint(i)">
            <i class="bi bi-trash"></i>
          </UIButton>
        </div>

        <div class="m-2">
          <div class="form-group">
            <label for="longitud-{{i}}">Longitud</label>
            <input type="text" class="form-control" id="longitud-{{i}}" formControlName="longitude" />
          </div>
          <div class="form-group">
            <label for="latitud-{{i}}">Latitud</label>
            <input type="text" class="form-control" id="latitud-{{i}}" formControlName="latitude" />
          </div>
        </div>
      </div>
  </div>
</div>
